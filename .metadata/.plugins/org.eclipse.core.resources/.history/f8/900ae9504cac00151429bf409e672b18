#!/usr/bin/python
#coding=utf-8
'''
Created on 2015-12-27
@author: ymy
Copyright ymyjohnny@gmail.com
'''


import gzip
from PIL import Image, ImageFont, ImageDraw

font_path = "/usr/share/fonts/truetype/ubuntu-font-family/Ubuntu-MI.ttf"
font = ImageFont.truetype(font_path, 20)

def getlines(draw, text, width):
    while text:
        for i in xrange(1, len(text) + 1):
            if text[i - 1] == "\n": break
            rect = draw.textsize(text[:i], font=font)
            if rect[0] > width: i -= 1; break
        yield text[:i]
        text = text[i:].rstrip('\r\n')
        
def main():
    getlines(draw, 'ssss\n33333', width):

if __name__ == '__main__':
    main()